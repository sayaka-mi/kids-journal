<div class="chart-container">
    <h2><%= @child.name %>の成長グラフ</h2>

    <%= line_chart [
      { name: "身長 (cm)", data: @height_weights.map { |hw| [hw.recorded_on, hw.height] } },
      { name: "体重 (kg)", data: @height_weights.map { |hw| [hw.recorded_on, hw.weight.presence || nil] } }
    ],
    locale: "ja",
    library: {
      locale: 'ja',
      scales: {
        x: {
          type: 'time',
          time: {
            displayFormats: {
              day: 'M月d日',
              week: 'M月d日',
              month: 'yyyy年M月',
              quarter: 'yyyy年M月',
              year: 'yyyy年'
            },
            tooltipFormat: 'yyyy年M月d日'
          }
        }
      }
    } %>

    <div class="chart-actions">
        <%= link_to '戻る', child_height_weights_path(@child), class: 'btn btn-secondary' %>
    </div>
</div>