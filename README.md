# アプリケーション名
kids-journal

## アプリケーション概要
このオリジナルアプリは、子育て中の親向けの子育て記録アプリです。
- 子供の成長を、写真や文章で記録し、身長体重をグラフで残す
- 親として必要な予防接種スケジュールを把握できる

## URL
https://kids-journal.onrender.com

## テスト用アカウント
* **テスト用アカウント**:
    - 名前：`テスト`
    - メールアドレス：`test@example.com`
    - パスワード：`password123`
* **Basic認証**:
    - ID：`admin`
    - パスワード：`2222`

## 利用方法
### 1. 初回アクセス → ログイン画面へ自動遷移
- ブラウザでアプリのURLにアクセスすると、ログイン画面へ自動遷移

[![Image from Gyazo](https://i.gyazo.com/afba335be3a7c43b4e74c2b438b75e2e.png)](https://gyazo.com/afba335be3a7c43b4e74c2b438b75e2e)

### 2. 新規登録
- 「新規登録はこちら」リンクから名前／メールアドレス／パスワードを入力して登録

[![Image from Gyazo](https://i.gyazo.com/db2cec251167cf9c1602f71521303c54.png)](https://gyazo.com/db2cec251167cf9c1602f71521303c54)
### 3. ログイン

- メールアドレスとパスワードでログイン
- **子供が未登録の場合**：自動で「子供を追加」画面に遷移

[![Image from Gyazo](https://i.gyazo.com/4aad301581b6e4f30699bf6d4db34e40.png)](https://gyazo.com/4aad301581b6e4f30699bf6d4db34e40)

- **子供が既に登録済みの場合**：自動で「子供選択」画面に遷移

[![Image from Gyazo](https://i.gyazo.com/65da361c19f2bdb8eaf54b2124b4d8ba.png)](https://gyazo.com/65da361c19f2bdb8eaf54b2124b4d8ba)

### 4. 子供登録（子供未登録時）
- 名前／生年月日／性別／アレルギー情報などを入力し登録

### 5. 子供選択（子供登録済み時）
- 登録済みの子供リストから対象の子供をクリックして選択
- 選択後、画面下部のフッターにある **「記録」「成長」「予防接種」** タブがすべて選択した子供の情報に切り替わります

### 6. 投稿機能
- 画面下部に固定されたフッターの **鉛筆アイコン（Fabボタン）** をタップ
- 写真／文章／タグを入力
  - **タグはインクリメンタルサーチ対応**：文字を入力すると、既存のタグ候補が絞り込まれて表示され、新規タグもそのまま追加可能
- 「投稿する」をクリック

[![Image from Gyazo](https://i.gyazo.com/bcd2d5ee05a05ab6c2e631d565705af8.png)](https://gyazo.com/bcd2d5ee05a05ab6c2e631d565705af8)

### 7. 投稿検索機能
- ヘッダーの虫眼鏡アイコンをクリック
- タグまたはキーワードを入力し、検索ボタンをクリック

### 8. 予防接種記録登録
- 「予防接種」タブを選択
- ワクチン一覧と推奨接種時期が表示される
- 各行の「接種日」「病院名」「メモ」を入力し、「保存」をクリック

[![Image from Gyazo](https://i.gyazo.com/f0e0307becff5a53344b5278c9b5e7e3.png)](https://gyazo.com/f0e0307becff5a53344b5278c9b5e7e3)

### 9. 身長・体重登録・グラフ化
- 「成長」タブを選択
- 「データ追加」ボタンをクリック
- 記録日／身長／体重を入力し、「保存」をクリック
- 登録後、「身長・体重一覧」画面に戻り、一覧内の「グラフ表示」ボタンをクリックすると、折れ線グラフで可視化される

[![Image from Gyazo](https://i.gyazo.com/37cfedf2b9e38001c86ef5f2cf952f26.gif)](https://gyazo.com/37cfedf2b9e38001c86ef5f2cf952f26)

### 10. 家族共有機能
- 「設定」をクリック  
- 共有したい家族のメールアドレスを入力して「共有する」をクリック  
- 招待されたアカウントは閲覧のみアクセス可能

## アプリケーションを作成した背景
- 子供の成長は記録しておかないと忘れてしまう
- 写真がスマホ内で埋もれがち
- 身長体重や次の予防接種時期をすぐに答えられない
- 乳児期以降に絞ったシンプルな記録アプリが欲しかった
- 複数アプリで分散管理するのは面倒であり、子供に特化した一つの場所で完結したい

## 実装した機能についての画像やGIFおよびその説明
- ログイン・新規登録機能（Deviseを使用）
- 子供登録・選択機能（UserとChildの1対多）
- 投稿・タグ機能（ActiveStorageと多対多リレーション＋JSのインクリメンタルサーチ）
- 成長記録のグラフ表示（Chart.jsを使用）
- 予防接種記録（JSON形式で接種時期管理）
- 家族共有機能（共有ユーザーは閲覧のみ許可）

## 実装予定の機能
- 予防接種時期通知機能（メール／プッシュ通知）

## データベース設計
[![Image from Gyazo](https://i.gyazo.com/1b47fb78b447b80be3e600e11aff5412.png)](https://gyazo.com/1b47fb78b447b80be3e600e11aff5412)

## 画面遷移図
[![Image from Gyazo](https://i.gyazo.com/aa919b26dcebb45e1401a7f7fa34e40b.png)](https://gyazo.com/aa919b26dcebb45e1401a7f7fa34e40b)

## 開発環境
* **Rubyバージョン**: 3.2.0
* **Railsバージョン**: 7.1.5.1
* **データベース**:  
  - ローカル開発環境は MySQL（`mysql2` Gem使用）
  - 本番環境は PostgreSQL（`pg` Gem使用）が基本
* **Webサーバ**: Puma
* **認証**: Devise
* **画像処理**: MiniMagick, image_processing
* **テスト**: RSpec, Capybara, Shoulda-matchers, FactoryBot
* **JavaScript**: importmap-rails, stimulus-rails,turbo-rails
* **その他の主なGem**: aws-sdk-s3 (画像保存時AWSサービス利用), chartkick (グラフ描画), dotenv-rails (環境変数管理),letter_opener (パスワードリセットメール確認用)

## ローカルでの動作方法
以下のコマンドを順に実行

```bash
git clone https://github.com/sayaka-mi/kids-journal.git
cd kids-journal
bundle install
rails db:create db:migrate
rails db:seed
rails s
```


## 工夫したポイント
1. **ユーザー認証とアクセス制御**
  Deviseを利用し、ログイン状態に応じてページへのアクセス制御を実装した。
  また、ユーザーがURLを直接入力しても不正アクセスできないよう、コントローラーのフィルターで厳密に制御している。
2. **子育て記録の投稿UI改善**
  写真アップロード時のプレビュー表示やタグのインクリメンタルサーチ機能を導入し、使いやすさを向上させた。
  これにより、親が直感的に記録を投稿できるように工夫した。
3. **成長グラフの視覚化**
  Chartkickを用いて子供の身長・体重データを折れ線グラフで表示した。
  見やすいグラフにより、成長の変化を一目で把握可能とした。
4. **レスポンシブデザインの実装**
  モバイルファーストで設計し、スマートフォン・タブレット・PCいずれでも快適に操作できるよう、レスポンシブデザインを導入した。
  特に、画面下部のフッターナビゲーションや投稿UIなどをモバイルに最適化し、子育て中の忙しい親が片手で操作できるよう工夫している。

## 改善点
1. **UIのさらなる改善**
  一部の画面で操作が直感的でない部分があり、ユーザーからのフィードバックを踏まえてUIをより分かりやすく改善する必要がある。
2. **パフォーマンスの向上**
  画像アップロードやグラフ表示において負荷がかかるケースがあるため、処理の最適化やキャッシュ機構の導入を検討する。
3. **通知機能の実装**
  予防接種時期のリマインド通知が未実装であるため、メールやプッシュ通知の仕組みを追加し、利便性を高める必要がある。
4. **テストの充実**
  現状のテストカバレッジは十分とは言えず、自動テストを増やし品質を安定させるべきである。

## 制作時間
2025年6月6日に開発を開始し、約1ヶ月間で本アプリを完成させた。